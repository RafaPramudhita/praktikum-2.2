<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cek Cuaca</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js"
        integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g=="
        crossorigin="anonymous" referrerpolicy="no-referrer"></script>
        
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 20px;
            background: #f7f7f7;
        }
        .kotak {
            background: white;
            padding: 20px;
            border: 4px solid #333;
            width: 600px;
            border-radius: 10px;
        }
        input {
            padding: 8px;
            width: 220px;
            font-size: 14px;
        }
        button {
            padding: 8px 16px;
            font-weight: bold;
            cursor: pointer;
        }
        h2 { margin-top: 0; }
        .hasil p {
            margin: 6px 0;
            font-size: 15px;
        }
        hr { margin: 15px 0; }
    </style>
</head>
<body>

<div class="kotak">
    <h2>Lokasi</h2>
    <input type="text" id="inputLokasi" placeholder="Masukkan nama kota...">
    <button id="btnGet">Get</button>
    <hr>
    <div class="hasil">
        <p><b>Cuaca</b></p>
        <p>Suhu = <span id="suhu">...</span> Â°C</p>
        <p>Kelembapan = <span id="kelembapan">...</span> %</p>
        <br>
        <p><b>Lokasi</b></p>
        <p>Negara = <span id="negara">...</span></p>
        <p>Provinsi = <span id="provinsi">...</span></p>
        <p>Kecamatan = <span id="kecamatan">...</span></p>
        <p>Longitude = <span id="lon">...</span></p>
        <p>Latitude = <span id="lat">...</span></p>
    </div>
</div>

<script>
$(document).ready(function(){
    $("#btnGet").click(function(){
        let lokasi = $("#inputLokasi").val();
        if (lokasi === "") {
            alert("Masukkan nama kota terlebih dahulu!");
            return;
        }

        const apiKey = "5c263347edab4df499420816250710";
        const urlapi = `https://api.weatherapi.com/v1/current.json?key=${apiKey}&q=${lokasi}&aqi=no`;

        $.ajax({
            url: urlapi,
            method: "GET",
            success: function(data) {
                console.log(data);
                // isi cuaca
                $("#suhu").text(data.current.temp_c);
                $("#kelembapan").text(data.current.humidity);

                // isi lokasi
                $("#negara").text(data.location.country);
                $("#provinsi").text(data.location.region);
                $("#kecamatan").text(data.location.name);
                $("#lon").text(data.location.lon);
                $("#lat").text(data.location.lat);
            },
            error: function(err) {
                alert("Lokasi tidak ditemukan!");
                console.log(err);
            }
        });
    });
});
</script>

</body>
</html>
